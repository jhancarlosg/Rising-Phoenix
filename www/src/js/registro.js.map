{"version":3,"sources":["../scripts/registro.jsx"],"names":["Distrito","props","nombre","patterns","dni","telefono","distrito","val","Registro","state","fullname","token_registros","token_inicial","mod_cliente","asesor","dni_found","dni_success","dni_readonly","handleInput","bind","handleSubmit","iniciar","asesor_ref","ASESOR_REF","React","createRef","current","value","trim","setState","xmlhttp","XMLHttpRequest","tmp_this","onreadystatechange","readyState","status","data","JSON","parse","responseText","editor","ref","handleDniFound","split","map","name","charAt","toUpperCase","substring","length","toLowerCase","join","open","send","event","target","id","test","handleInputsChange","RegExp","setSuccess","searchDNI","setError","setWarning","setValidator","distritos","some","dist","option","isBoolean","getPreventDefaultReset","document","getElementById","reset","$","removeClass","focus","preventDefault","params","button","alert","prepend","Alerta","token","tipo","setRequestHeader","handleAsesorChange","others_not_readonly","can_show","disabled","readOnly","style","visibility","getReadOnly","inputManageAttributes","panel","textTransform","Component","REGISTRO_MANAGER_REF","RegistroManager","xmlhttp2","EditorRegistro","EDITOR_REGISTRO_REF","REGISTRO_REF","ReactDOM","render","querySelector"],"mappings":"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","file":"registro.js","sourcesContent":["function Distrito(props) {\n\treturn (\n\t\t<option value={props.nombre} />\n\t);\n}\n\nlet patterns = {\n\tdni: \"[0-9]{8}\",\n\ttelefono: \"^(?:9\\\\d{8}|[0-8]\\\\d{6})$\",\n\tdistrito: function (val) {\n\t\t/* let result = false;\n\t\tlet datalist = document.getElementById(\"distritos\");\n\t\tfor (let i = 0; i < datalist.options.length; i++) {\n\t\t\tresult =  val == datalist.options[i].value;\n\t\t\tif(result) break;\n\t\t}\n\t\treturn result; */\n\t\t//return this.props.distritos.some((dist) => val == dist);\n\t}\n}\n\nclass Registro extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {dni: '', fullname: '', telefono: '', distrito: '', token_registros: props.token_inicial, mod_cliente: null, asesor: null, dni_found: false, dni_success: false, dni_readonly: false};\n\t\tthis.handleInput = this.handleInput.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\t//this.handleAsesorChange = this.handleAsesorChange.bind(this);\n\t\tthis.iniciar = this.iniciar.bind(this);\n\t\tthis.asesor_ref = ASESOR_REF;\n\t\tthis.dni = React.createRef();\n\t\tthis.fullname = React.createRef();\n\t\tthis.telefono = React.createRef();\n\t\tthis.distrito = React.createRef();\n\t}\n\n\thandleAsesorChange() {\n\t\tif (this.asesor_ref.current && this.asesor_ref.current.value.trim()) {\n\t\t\tthis.setState({ asesor: this.asesor_ref.current.value.trim() });\n\t\t} else {\n\t\t\tthis.setState({ asesor: null });\n\t\t}\n\t}\n\n\tsearchDNI(val) {\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\tlet tmp_this = this;\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tlet data = JSON.parse(this.responseText);\n\t\t\t\tif(tmp_this.props.editor) {\n\t\t\t\t\ttmp_this.props.editor.ref.current.handleDniFound(data);\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof data.dni != 'undefined') {\n\t\t\t\t\t\tdata.fullname = data.fullname.split(' ').map((name) => (\n\t\t\t\t\t\t\tname && name.charAt(0).toUpperCase() + name.substring(1, name.length).toLowerCase()\n\t\t\t\t\t\t)).join(' ');\n\t\t\t\t\t\ttmp_this.setState({\n\t\t\t\t\t\t\tfullname: data.fullname, distrito: data.distrito, telefono: data.telefono ? data.telefono : '',\n\t\t\t\t\t\t\tdni_found: true\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (tmp_this.state.dni_found) tmp_this.setState({dni_found: false, fullname: '', distrito: '', telefono: ''});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\txmlhttp.open(\"GET\", \"/registro?client=get&json=true&dni=\" + val, true);\n\t\txmlhttp.send();\n\t}\n\n\thandleInput(event) {\n\t\tlet val = event.target.value;\n\t\tswitch (event.target.id) {\n\t\t\tcase \"dni\":\n\t\t\t\tif (/^\\d{0,8}$/.test(val) && !this.state.dni_readonly) {\n\t\t\t\t\tif(this.props.editor) this.props.editor.ref.current.handleInputsChange(event);\n\t\t\t\t\tthis.setState({dni: val});\n\t\t\t\t\tthis.setState({dni_success: false});\n\t\t\t\t\tif (val) {\n\t\t\t\t\t\tif (new RegExp(patterns.dni).test(val)) {\n\t\t\t\t\t\t\tsetSuccess(event);\n\t\t\t\t\t\t\tthis.setState({dni_success: true});\n\t\t\t\t\t\t\tthis.searchDNI(val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetError(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetWarning(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"fullname\":\n\t\t\t\t// https://regex101.com/r/mFnoYm/1\n\t\t\t\tif (/^[a-zA-Z]+(?:[ ][a-zA-Z]+)*[ ]?$|^$/.test(val)) {\n\t\t\t\t\tif(this.props.editor) this.props.editor.ref.current.handleInputsChange(event);\n\t\t\t\t\tif (val) {\n\t\t\t\t\t\tval = val.split(' ').map((name) => (\n\t\t\t\t\t\t\tname && name.charAt(0).toUpperCase() + name.substring(1, name.length).toLowerCase()\n\t\t\t\t\t\t)).join(' ');\n\t\t\t\t\t\tif (val.length>=3) {\n\t\t\t\t\t\t\tsetSuccess(event);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetError(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetWarning(event);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({fullname: val});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"telefono\":\n\t\t\t\tif (/^(?:9\\d{0,8}|\\d{0,7})$/.test(val)) {\n\t\t\t\t\tif(this.props.editor) this.props.editor.ref.current.handleInputsChange(event);\n\t\t\t\t\tthis.setState({telefono: val});\n\t\t\t\t\tif (val) {\n\t\t\t\t\t\tif (new RegExp(patterns.telefono).test(val)) {\n\t\t\t\t\t\t\tsetSuccess(event);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetError(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetValidator(event, \"\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"distrito\":\n\t\t\t\t//if (this.props.distritos.some((dist) => new RegExp(`^.*${val}.*$`, 'i').test(dist))) {\n\t\t\t\t\tif(this.props.editor) this.props.editor.ref.current.handleInputsChange(event);\n\t\t\t\t\tthis.setState({distrito: val.toUpperCase()});\n\t\t\t\t\tif (val) {\n\t\t\t\t\t\tif (this.props.distritos.some((dist) => new RegExp(`^${val}$`, 'i').test(dist))) {\n\t\t\t\t\t\t\tsetSuccess(event);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetWarning(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetError(event);\n\t\t\t\t\t}\n\t\t\t\t//}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tiniciar(option) {\n\t\tlet isBoolean = typeof option == \"boolean\";\n\t\tif (!this.props.editor || !this.props.editor.ref.current || !this.props.editor.ref.current.getPreventDefaultReset() || (isBoolean && option) ) {\n\t\t\tdocument.getElementById(\"form-registro\").reset();\n\t\t\tthis.setState({dni: '', fullname: '', distrito: '', telefono: '', dni_success: false, dni_found: false});\n\t\t\t$(\".form-group\").removeClass('has-warning has-success has-error');\n\t\t\t$(\"#dni\").focus();\n\t\t}\n\t}\n\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tif (this.state.dni && this.state.fullname && this.state.distrito && this.state.asesor) {\n\t\t\tlet xmlhttp = new XMLHttpRequest();\n\t\t\tlet params = `dni=${this.state.dni}&token_registros=${this.state.token_registros}&asesor=${this.state.asesor}`;\n\t\t\tif (this.state.fullname) params += `&fullname=${this.state.fullname.trim()}`;\n\t\t\tif (this.state.telefono) params += `&telefono=${this.state.telefono}`;\n\t\t\tif (this.state.distrito) params += `&distrito=${this.state.distrito}`;\n\t\t\tif (this.state.mod_cliente) params += `&mod_cliente=${this.state.mod_cliente}`;\n\t\t\t$(\"#send_btn\").button('loading');\n\t\t\tlet tmp_this = this;\n\t\t\txmlhttp.onreadystatechange = function() {\n\t\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\t\tlet data = JSON.parse(this.responseText);\n\t\t\t\t\t$('.alert').alert('close');\n\t\t\t\t\t$(\"#registro-cnt\").prepend(Alerta(data));\n\t\t\t\t\ttmp_this.setState({token_registros: data.token});\n\t\t\t\t\tif (data.tipo == 'success') {\n\t\t\t\t\t\ttmp_this.iniciar(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.readyState == 4) {\n\t\t\t\t\t$(\"#send_btn\").button('reset');\n\t\t\t\t}\n\t\t\t};\n\t\t\txmlhttp.open(\"POST\", \"/registro\", true);\n\t\t\txmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\t\t\txmlhttp.send(params);\n\t\t}\n\t}\n\n\tcomponentDidMount () {\n\t\tthis.handleAsesorChange();\n\t\tthis.iniciar();\n\t}\n\t\n\tgetReadOnly() {\n\t\treturn !this.state.others_not_readonly && this.state.dni_found;\n\t}\n\n\tinputManageAttributes() {\n\t\tlet can_show = this.state.dni_success || this.state.mod_cliente && !this.state.dni_readonly;\n\t\tif (this.dni.current) {\n\t\t\t//this.dni.current.style.visibility = can_show ? 'visible' : 'hidden';\n\t\t\tthis.dni.current.disabled = !this.state.asesor;\n\t\t\tthis.dni.current.readOnly = this.state.dni_readonly;\n\t\t}\n\t\tif (this.fullname.current) {\n\t\t\tthis.fullname.current.style.visibility = can_show ? 'visible' : 'hidden';\n\t\t\tthis.fullname.current.disabled = !this.state.asesor;\n\t\t\tthis.fullname.current.readOnly = this.getReadOnly();\n\t\t}\n\t\tif (this.distrito.current) {\n\t\t\tthis.distrito.current.style.visibility = can_show ? 'visible' : 'hidden';\n\t\t\tthis.distrito.current.disabled = !this.state.asesor;\n\t\t\tthis.distrito.current.readOnly = this.getReadOnly();\n\t\t}\n\t\tif (this.telefono.current) {\n\t\t\tthis.telefono.current.style.visibility = can_show ? 'visible' : 'hidden';\n\t\t\tthis.telefono.current.disabled = !this.state.asesor;\n\t\t\tthis.telefono.current.readOnly = this.getReadOnly();\n\t\t}\n\t}\n\n\trender() {\n\t\tlet distritos = this.props.distritos.map(distrito => <Distrito nombre={distrito} key={distrito} />);\n\t\tthis.inputManageAttributes();\n\t\treturn (\n\t\t\t<form id=\"form-registro\" className=\"form-horizontal\" onSubmit={this.handleSubmit} onReset={this.iniciar}>\n\t\t\t\t{this.props.editor}\n\t\t\t\t<div className={\"panel panel-\"+this.state.panel}>\n\t\t\t\t\t<div className=\"panel-heading\">\n\t\t\t\t\t\t<h3 className=\"panel-title text-center text-uppercase\">BIENVENIDO: <strong>{this.state.asesor}</strong></h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"panel-body\">\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label htmlFor=\"dni\" className=\"col-sm-2 control-label\">DNI</label>\n\t\t\t\t\t\t\t<div className=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"text\" pattern={patterns.dni} onChange={this.handleInput} className=\"form-control\" ref={this.dni} id=\"dni\" name=\"dni\" placeholder=\"Ingresa el DNI (i.e. 87654321)\" minLength={8} maxLength={8} required={true} value={this.state.dni} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label htmlFor=\"fullname\" className=\"col-sm-2 control-label\">NOMBRE Y APELLIDO</label>\n\n\t\t\t\t\t\t\t<div className=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"text\" onChange={this.handleInput} className=\"form-control\" ref={this.fullname} id=\"fullname\" name=\"fullname\" placeholder=\"Escribe un nombre\" required={true} value={this.state.fullname} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label htmlFor=\"distrito\" className=\"col-sm-2 control-label\">DISTRITO</label>\n\t\t\t\t\t\t\t<div className=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"text\" onChange={this.handleInput} className=\"form-control\" list=\"distritos\" ref={this.telefono} id=\"distrito\" name=\"distrito\"  placeholder=\"¿Dónde vives?\" required={true} value={this.state.distrito} style={{textTransform: \"uppercase\"}} />\n\t\t\t\t\t\t\t\t<datalist name=\"distritos\" id=\"distritos\">\n\t\t\t\t\t\t\t\t\t{distritos}\n\t\t\t\t\t\t\t\t</datalist>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t<label htmlFor=\"telefono\" className=\"col-sm-2 control-label\">TELÉFONO</label>\n\t\t\t\t\t\t\t<div className=\"col-sm-10\">\n\t\t\t\t\t\t\t\t<input type=\"text\" onChange={this.handleInput} className=\"form-control\" ref={this.distrito} id=\"telefono\" name=\"telefono\" placeholder=\"Digita el número (opcional)\" pattern={patterns.telefono} minLength={7} maxLength={12} value={this.state.telefono==null ? '' : this.state.telefono} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"panel-footer\">\n\t\t\t\t\t\t<div className=\"btn-group btn-group-justified\" role=\"group\" aria-label=\"...\">\n\t\t\t\t\t\t\t<div className=\"btn-group\" role=\"group\">\n\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"toke_inicial\" name=\"token\" value={this.state.token_registros} />\n\t\t\t\t\t\t\t\t<button type=\"reset\" id=\"reset-form\" className=\"btn btn-danger\">LIMPIAR</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"btn-group\" role=\"group\">\n\t\t\t\t\t\t\t\t<button type=\"submit\" id=\"send_btn\" className=\"btn btn-primary\" data-loading-text=\"Enviando...\">GRABAR</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nvar REGISTRO_MANAGER_REF = React.createRef();\n\nclass RegistroManager extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {distritos: [], token_inicial: ''};\n\t}\n\n\tcomponentDidMount() {\n\t\tlet tmp_this = this;\n\t\tlet xmlhttp = new XMLHttpRequest();\n\t\txmlhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tlet data = JSON.parse(this.responseText);\n\t\t\t\ttmp_this.setState({distritos: data.distritos});\n\t\t\t}\n\t\t};\n\t\txmlhttp.open(\"GET\", \"/registro?distritos=get&json=true\", true);\n\t\txmlhttp.send();\n\t\tlet xmlhttp2 = new XMLHttpRequest();\n\t\txmlhttp2.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tlet data = JSON.parse(this.responseText);\n\t\t\t\ttmp_this.setState({token_inicial: data.token});\n\t\t\t}\n\t\t};\n\t\txmlhttp2.open(\"GET\", \"/registro?token=get&json=true\", true);\n\t\txmlhttp2.send();\n\t\tif (typeof EditorRegistro != 'undefined' && typeof EDITOR_REGISTRO_REF != 'undefined' && !EDITOR_REGISTRO_REF.current) {\n\t\t\tthis.setState({editor: <EditorRegistro ref={EDITOR_REGISTRO_REF} />});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Registro {...this.state} key={this.state.token_inicial} ref={REGISTRO_REF} />\n\t\t);\n\t}\n}\n\n$(\n\tReactDOM.render(<RegistroManager ref={REGISTRO_MANAGER_REF} />, document.querySelector(\"#registro-cnt\"))\n);\n"]}